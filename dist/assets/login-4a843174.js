import{_ as y,j as k,r as d,o as c,f as I,e as a,b as e,d as p,t as u,m as r,ai as f,aj as L,s as C,c as M,x as B}from"./index-10957db2.js";import{u as g,a as A,b as N}from"./misc-mask-light-851dda13.js";import{V as z,a as D,b as P,c as S,d as j}from"./VForm-acce26e7.js";import{a as E}from"./axios-1779699b.js";import{V as F}from"./VCard-79ff78eb.js";import{V}from"./VCardText-fba38b63.js";import{V as T}from"./VImg-79c306aa.js";import{V as _,a as m}from"./VRow-fbf0bec9.js";import{V as b}from"./VTextField-9d9b781b.js";import"./forwardRefs-6ea3df5c.js";import"./VAvatar-aba8af5a.js";const Z={class:"mb-0"},$={key:0,class:"text-error mt-2"},ee={__name:"login",setup(R){const{t}=y(),v=k(),l=d({email:"",password:""});d("");const w=async()=>{try{const s=await E.post("https://api.alifawzi.software/api/Autors/login",l.value);localStorage.setItem("auth_token",s.data.token),localStorage.setItem("Email",s.data.email),location.reload()}catch(s){console.log("Failed:",s),l.value.errorMessage=t(s.response.data.message)||t("An error occurred.")}},h=s=>s.length>=8||t("Password must be at least 8 characters long"),x=s=>/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/.test(s)||t("Invalid email address"),i=d(!1);return g(j,S,P,D,!0),g(N,A),(s,o)=>(c(),I(_,{"no-gutters":"",class:"auth-wrapper bg-surface"},{default:a(()=>[e(m,{cols:"12",md:"12",class:"auth-card-v2 d-flex align-center justify-center"},{default:a(()=>[e(F,{flat:"","max-width":500,class:"mt-12 mt-sm-0 pa-4"},{default:a(()=>[e(V,null,{default:a(()=>[e(T,{src:"/MainLogo.png",class:"mb-4 w-16 h-auto"}),p("p",Z,u(r(t)("Please sign-in to your account")),1)]),_:1}),e(V,null,{default:a(()=>[e(z,{onSubmit:f(w,["prevent"])},{default:a(()=>[e(_,null,{default:a(()=>[e(m,{cols:"12"},{default:a(()=>[e(b,{rules:[x],modelValue:l.value.email,"onUpdate:modelValue":o[0]||(o[0]=n=>l.value.email=n),autofocus:"",label:r(t)("Email"),type:"email",clearable:""},null,8,["rules","modelValue","label"])]),_:1}),e(m,{cols:"12"},{default:a(()=>[e(b,{rules:[h],modelValue:l.value.password,"onUpdate:modelValue":o[1]||(o[1]=n=>l.value.password=n),label:r(t)("Password"),type:i.value?"text":"password","append-inner-icon":i.value?"tabler-eye-off":"tabler-eye","onClick:appendInner":o[2]||(o[2]=n=>i.value=!i.value),clearable:""},null,8,["rules","modelValue","label","type","append-inner-icon"]),e(L,{class:"mt-8",block:"",type:"submit"},{default:a(()=>[C(u(r(t)("sign in")),1)]),_:1}),l.value.errorMessage?(c(),M("p",$,u(l.value.errorMessage),1)):B("",!0)]),_:1}),e(m,{cols:"12",class:"text-center text-base"},{default:a(()=>[p("span",null,u(r(t)("New on our platform ?")),1),p("button",{class:"text-primary ms-2",onClick:o[3]||(o[3]=f(n=>r(v).push("/register"),["prevent"]))},u(r(t)("Create an account")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}};export{ee as default};
