import{a1 as ie,a2 as $e,a3 as Ie,a4 as re,aw as xe,a5 as ue,b as i,_ as de,r as _,D as Ce,ah as F,a as Te,o,c,e as m,aj as A,p as z,d as h,ai as Re,F as C,h as R,f as x,x as b,m as B,Y as J,s as j,t as y,H as Q,I as W,aP as qe,aQ as Ne,aR as Se,a9 as Le,aa as Me,X as N,aS as ze,aT as je,as as Ue,ac as Ee,aU as Oe,aV as Ke,a6 as X,aW as He,ar as Ge,a8 as Ze,aX as Qe,aY as We,aM as Xe,aG as Ye,ay as Je,aN as fe,aH as ea,aZ as Y,a_ as ge,aC as pe,w as se,a0 as aa,G as be,v as ta}from"./index-10957db2.js";import{g as Pe,p as ye,a as Ve,d as la}from"./apiService-d37951fb.js";import{E as na,B as sa,I as oa,P as ia,U as ra,F as ua,a as da,b as ca,c as va,d as ma,e as fa,f as ga,g as pa,h as ba,i as ya,j as Va,k as ha,l as _a,A as ka,m as wa,n as $a,C as Ia,o as xa,p as Ca,q as Sa,H as La,s as Ua,t as Ea,u as Pa,v as Da,w as Ba,L as Aa,x as Fa,M as Ta,y as Ra,T as qa,z as Na,D as Ma,G as he,V as za,J as ja,K as Z,N as Oa,r as De,O as _e}from"./Add-6b4d43c1.js";import{V as Be}from"./VTooltip-33b1041c.js";import{V as ee,c as ce,b as oe}from"./VCard-79ff78eb.js";import{V as ae}from"./VCardText-fba38b63.js";import{V as Ae,a as Fe}from"./VRow-fbf0bec9.js";import{V as P}from"./VTextField-9d9b781b.js";import{a as Ka}from"./VList-e75f7a33.js";import{V as te}from"./VDivider-54e21b4a.js";import{V as ve}from"./VSpacer-8a23dfd3.js";import{V as me}from"./VDialog-b239c836.js";import{_ as Ha}from"./_plugin-vue_export-helper-c27b6911.js";const Ga=ie({fluid:{type:Boolean,default:!1},...$e(),...Ie()},"VContainer"),Za=re()({name:"VContainer",props:Ga(),setup(e,V){let{slots:r}=V;const{rtlClasses:g}=xe();return ue(()=>i(e.tag,{class:["v-container",{"v-container--fluid":e.fluid},g.value,e.class],style:e.style},r)),{}}});const Qa={class:"pa-0 text-center"},Wa={class:"flex gap-3"},Xa={class:"mt-2 w-[700px]"},Ya={class:"text-caption text-medium-emphasis"},Ja={__name:"Edit",props:{id:{type:String,required:!0},endPoint:{type:String,required:!0},EditMessage:{type:String,required:!0},state:{type:Object,required:!0},imageEndpoint:{type:String,required:!0},useCKEditor:{type:Boolean,default:!1},fetchRow:{type:Boolean,default:!0,required:!1}},emits:["DataEdited","loading","EditError"],setup(e,{emit:V}){const{t:r}=de(),g=e,v=Oa,w=_({plugins:[na,sa,oa,ia,ra,ua,da,ca,va,ma,fa,ga,pa,ba,ya,Va,ha,_a,ka,wa,$a,Ia,xa,Ca,Sa,La,Ua,Ea,Pa,Da,Ba,Aa,Fa,Ta,Ra,qa,Na,Ma],toolbar:["bold","italic","undo","redo","fontColor","imageUpload","imageStyle:alignLeft","imageStyle:alignCenter","imageStyle:alignRight","alignment","autoformat","blockQuote","ckFinder","cloudServices","easyImage","heading","highlight","horizontalLine","htmlEmbed","indent","indentBlock","link","list","mediaEmbed","pasteFromOffice","table","tableToolbar","textTransformation"],image:{resizeOptions:[{name:"resizeImage:original",value:null,label:"Original"},{name:"resizeImage:50",value:"50",label:"50%"},{name:"resizeImage:75",value:"75",label:"75%"}],toolbar:["imageStyle:alignLeft","imageStyle:alignCenter","imageStyle:alignRight","|","resizeImage","|","imageTextAlternative"],styles:{options:["alignLeft","alignCenter","alignRight"]},caption:!0},imageUpload:{types:["jpeg","png","gif","bmp","webp","tiff"],multiple:!0}}),S=V,l=_({...g.state}),U=_(!1),k=_(null),p=_([]),D=_(!1),$=_(!1),I=_(!1),L=async()=>{try{const s=await Pe(`${g.endPoint}/${g.id}`);l.value=s}catch(s){console.error("Failed to fetch row data:",s)}};g.fetchRow&&Ce(()=>{L()});const O=async()=>{if(!D.value){U.value=!0,D.value=!0;try{const s=new FormData;if(k.value&&k.value[0])s.append("file",k.value[0]);else if(l.value.url&&l.value.url[0])s.append("file",l.value.url[0]);else if(l.value.image||l.value.urlImage)return;const a=await Ve(g.imageEndpoint,s,"",!0);l.value.image?l.value.image=a:l.value.url?l.value.url=a:l.value.urlImage=a}catch(s){console.error("Failed to upload image",s)}finally{D.value=!1}}},G=async()=>{if(!(!p.value.length||$.value)){U.value=!0,$.value=!0;try{const s=new FormData;p.value.forEach(d=>{s.append("files",d)});const a=await Ve(g.imageEndpoint,s,"",!0);l.value.urls=a}catch(s){console.error("Failed to upload images",s)}finally{$.value=!1}}},T=async()=>{if(!(D.value||$.value)){U.value=!0,S("loading",!0),I.value=!1;try{(k.value||l.value.url||l.value.image||l.value.urlImage)&&await O(),(l.value.urls&&l.value.urls.length!==0||p.value&&p.value.length!==0)&&await G();const s={...l.value};let a;l.value.url?a=await ye(`${g.endPoint}/${g.id}?url=${l.value.url}`):a=await ye(`${g.endPoint}/${g.id}`,s),l.value={...g.state},S("DataEdited"),De.toggleRefresh()}catch(s){console.log("Failed to edit data",s),S("EditError")}finally{U.value=!1,S("loading",!1),L()}}},M=s=>/^[0-9]*$/.test(s)||r("this field must have only numbers"),K=s=>/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/.test(s)||r("Invalid email address");F({get(){return k.value instanceof File?k.value:l.value.url||null},set(s){s instanceof File?k.value=s:l.value.url=s}}),F({get(){return p.value.length>0?p.value:l.value.images||[]},set(s){Array.isArray(s)&&s.some(a=>a instanceof File)?p.value=s:l.value.images=s}});const q=Object.keys(he).map(s=>({value:he[s],title:s})),E=_(!1);_("");const H=s=>{l.value.iconId=s.value,E.value=!1};return(s,a)=>{const d=Te("ckeditor");return o(),c("div",Qa,[i(me,{modelValue:I.value,"onUpdate:modelValue":a[6]||(a[6]=f=>I.value=f),"max-width":"fit-content"},{activator:m(({props:f})=>[i(Be,{text:s.$t("Edit")},{activator:m(({props:n})=>[i(A,z(n,f,{icon:"tabler-edit",variant:"text",color:"edit"}),null,16)]),_:2},1032,["text"])]),default:m(()=>[h("form",{onSubmit:Re(T,["prevent"])},[i(ee,{class:"w-[750px] scrollable-card",title:s.$t(g.EditMessage)},{default:m(()=>[i(ae,{class:"scrollable-content"},{default:m(()=>[i(Ae,{dense:"",class:"container"},{default:m(()=>[s.value!==null&&typeof s.value!="object"?(o(!0),c(C,{key:0},R(l.value,(f,n)=>(o(),x(Fe,{key:n,cols:"12",md:"12",sm:"12"},{default:m(()=>[n==="name"?(o(),x(P,{key:0,modelValue:l.value[n],"onUpdate:modelValue":t=>l.value[n]=t,label:s.$t("name"),clearable:"",required:""},null,8,["modelValue","onUpdate:modelValue","label"])):b("",!0),n==="costumerName"?(o(),x(P,{key:1,modelValue:l.value[n],"onUpdate:modelValue":t=>l.value[n]=t,label:s.$t("name"),clearable:"",required:""},null,8,["modelValue","onUpdate:modelValue","label"])):b("",!0),n==="services"?(o(),x(P,{key:2,modelValue:l.value[n],"onUpdate:modelValue":t=>l.value[n]=t,label:s.$t("service"),clearable:""},null,8,["modelValue","onUpdate:modelValue","label"])):b("",!0),n==="propertieses"?(o(),x(P,{key:3,modelValue:l.value[n],"onUpdate:modelValue":t=>l.value[n]=t,label:s.$t("properties"),clearable:""},null,8,["modelValue","onUpdate:modelValue","label"])):b("",!0),n==="subtitle"?(o(),x(P,{key:4,modelValue:l.value[n],"onUpdate:modelValue":t=>l.value[n]=t,label:s.$t("subtitle"),clearable:""},null,8,["modelValue","onUpdate:modelValue","label"])):n==="email"?(o(),x(P,{key:5,modelValue:l.value[n],"onUpdate:modelValue":t=>l.value[n]=t,type:"email",rules:[K],label:s.$t("email"),clearable:""},null,8,["modelValue","onUpdate:modelValue","rules","label"])):n==="message"?(o(),x(P,{key:6,modelValue:l.value[n],"onUpdate:modelValue":t=>l.value[n]=t,label:s.$t("message"),clearable:""},null,8,["modelValue","onUpdate:modelValue","label"])):n==="location"?(o(),x(P,{key:7,modelValue:l.value[n],"onUpdate:modelValue":t=>l.value[n]=t,label:s.$t("location"),clearable:""},null,8,["modelValue","onUpdate:modelValue","label"])):n==="phoneNumber"||n==="phoneNumberService"?(o(),x(P,{key:8,modelValue:l.value[n],"onUpdate:modelValue":t=>l.value[n]=t,type:"tel",rules:[M],label:s.$t("phone number"),clearable:""},null,8,["modelValue","onUpdate:modelValue","rules","label"])):n==="title"?(o(),x(P,{key:9,modelValue:l.value[n],"onUpdate:modelValue":t=>l.value[n]=t,label:s.$t("title"),clearable:""},null,8,["modelValue","onUpdate:modelValue","label"])):n==="iconId"?(o(),x(za,{key:10,ref_for:!0,ref:"select",modelValue:l.value[n],"onUpdate:modelValue":t=>l.value[n]=t,items:B(q),"item-value":"value","item-text":"title",icon:"","persistent-hint":"",label:s.$t("Icon"),clearable:"",menu:E.value,"onUpdate:menu":a[0]||(a[0]=t=>E.value=t)},{selection:m(t=>[i(J,null,{default:m(()=>[j(y(t.item.value),1)]),_:2},1024)]),item:m(t=>[i(Ka,{onClick:u=>H(t.item)},{default:m(()=>[h("div",Wa,[i(J,null,{default:m(()=>[j(y(t.item.value),1)]),_:2},1024),h("p",null,y(t.item.title),1)])]),_:2},1032,["onClick"])]),_:2},1032,["modelValue","onUpdate:modelValue","items","label","menu"])):n==="description"?(o(),c(C,{key:11},[g.useCKEditor?(o(),c(C,{key:0},[h("span",null,y(s.$t("custom style")),1),h("div",Xa,[i(d,{editor:B(v),modelValue:l.value[n],"onUpdate:modelValue":t=>l.value[n]=t,config:w.value},null,8,["editor","modelValue","onUpdate:modelValue","config"])])],64)):(o(),x(ja,{key:1,modelValue:l.value[n],"onUpdate:modelValue":t=>l.value[n]=t,label:s.$t("description"),clearable:""},null,8,["modelValue","onUpdate:modelValue","label"]))],64)):n==="createdAt"?(o(),c(C,{key:12},[],64)):n==="url"?(o(),x(Z,{key:13,modelValue:l.value[n],"onUpdate:modelValue":t=>l.value[n]=t,label:s.$t("Image")+"*",clearable:"",accept:"image/*"},null,8,["modelValue","onUpdate:modelValue","label"])):n==="image"?(o(),c(C,{key:14},[Q(i(P,{modelValue:l.value[n],"onUpdate:modelValue":t=>l.value[n]=t},null,8,["modelValue","onUpdate:modelValue"]),[[W,!1]]),i(Z,{modelValue:k.value,"onUpdate:modelValue":a[1]||(a[1]=t=>k.value=t),label:s.$t("Image")+"*",clearable:"",accept:"image/*"},null,8,["modelValue","label"])],64)):n==="urlImage"?(o(),c(C,{key:15},[Q(i(P,{modelValue:l.value[n],"onUpdate:modelValue":t=>l.value[n]=t},null,8,["modelValue","onUpdate:modelValue"]),[[W,!1]]),i(Z,{modelValue:k.value,"onUpdate:modelValue":a[2]||(a[2]=t=>k.value=t),label:s.$t("Image")+"*",clearable:"",accept:"image/*"},null,8,["modelValue","label"])],64)):n==="images"&&n!=="urlImage"?(o(),c(C,{key:16},[Q(i(P,{modelValue:l.value[n],"onUpdate:modelValue":t=>l.value[n]=t},null,8,["modelValue","onUpdate:modelValue"]),[[W,!1]]),i(Z,{modelValue:p.value,"onUpdate:modelValue":a[3]||(a[3]=t=>p.value=t),label:s.$t("Images"),clearable:"",multiple:"",accept:"image/*"},null,8,["modelValue","label"])],64)):n==="urls"&&n!=="urlImage"?(o(),c(C,{key:17},[Q(i(P,{modelValue:l.value[n],"onUpdate:modelValue":t=>l.value[n]=t},null,8,["modelValue","onUpdate:modelValue"]),[[W,!1]]),i(Z,{modelValue:p.value,"onUpdate:modelValue":a[4]||(a[4]=t=>p.value=t),label:s.$t("Images"),clearable:"",multiple:"",accept:"image/*"},null,8,["modelValue","label"])],64)):b("",!0)]),_:2},1024))),128)):b("",!0)]),_:1}),h("small",Ya,y(s.$t("*indicates required field")),1)]),_:1}),i(te),i(ce,{class:"footer"},{default:m(()=>[i(ve),i(A,{text:s.$t("Close"),variant:"plain",onClick:a[5]||(a[5]=f=>I.value=!1)},null,8,["text"]),i(A,{id:"submit-btn",color:"primary",text:s.$t("Edit"),type:"submit",variant:"tonal"},null,8,["text"])]),_:1})]),_:1},8,["title"])],32)]),_:1},8,["modelValue"])])}}},et={class:"text-center"},at={__name:"Delete",props:{endPoint:{type:String,default:"",required:!0},id:{type:Number,required:!0},state:{type:Object,required:!0},rowName:{type:String,default:"row",required:!0}},emits:["rowDeleted","loading","DeleteError"],setup(e,{emit:V}){const{t:r}=de(),g=V,v=e,w=_(!1),S=_(!1),l=async()=>{try{S.value=!0,g("loading",!0),w.value=!1,await la(v.endPoint,v.id),v.state&&v.state.value&&(v.state.value=v.state.value.filter(U=>U.id!==v.id)),g("rowDeleted"),De.toggleRefresh()}catch(U){console.error("Failed to delete the row:",U),g("DeleteError")}finally{S.value=!1,g("loading",!1)}};return(U,k)=>(o(),c("div",et,[i(me,{modelValue:w.value,"onUpdate:modelValue":k[1]||(k[1]=p=>w.value=p),"max-width":"600"},{activator:m(({props:p})=>[i(Be,{text:B(r)("Delete")},{activator:m(({props:D})=>[i(A,z(D,p,{icon:"tabler-trash",variant:"text",color:"error"}),null,16)]),_:2},1032,["text"])]),default:m(()=>[i(ee,{style:{padding:"16px 0px 0px 16px"}},{default:m(()=>[i(oe,null,{default:m(()=>[j(y(B(r)(`Delete ${v.rowName}`)),1)]),_:1}),i(ae,null,{default:m(()=>[h("p",null,y(B(r)("Are you sure you want to delete this"))+" "+y(B(r)(v.rowName))+" "+y(B(r)("?")),1)]),_:1}),i(te),i(ce,{class:"footer"},{default:m(()=>[i(ve),i(A,{text:B(r)("Close"),variant:"plain",onClick:k[0]||(k[0]=p=>w.value=!1)},null,8,["text"]),i(A,{id:"submit-btn",color:"primary",text:B(r)("Delete"),onClick:l},null,8,["text"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}},tt=qe("textlength",{state:()=>({}),actions:{textLength(e,V){return e==null||e===""?"":e.length>V?e.slice(0,V)+"...":e}}});const lt={actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, heading","card-avatar":"image, list-item-avatar",chip:"chip","date-picker":"list-item, heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",divider:"divider",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",ossein:"ossein",paragraph:"text@3",sentences:"text@2",subtitle:"text",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"chip, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"text@6","table-tfoot":"text@2, avatar@2",text:"text"};function nt(e){let V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return i("div",{class:["v-skeleton-loader__bone",`v-skeleton-loader__${e}`]},[V])}function ke(e){const[V,r]=e.split("@");return Array.from({length:r}).map(()=>le(V))}function le(e){let V=[];if(!e)return V;const r=lt[e];if(e!==r){if(e.includes(","))return we(e);if(e.includes("@"))return ke(e);r.includes(",")?V=we(r):r.includes("@")?V=ke(r):r&&V.push(le(r))}return[nt(e,V)]}function we(e){return e.replace(/\s/g,"").split(",").map(le)}const st=ie({boilerplate:Boolean,color:String,loading:Boolean,loadingText:{type:String,default:"$vuetify.loading"},type:{type:[String,Array],default:"ossein"},...Ne(),...Se(),...Le()},"VSkeletonLoader"),ot=re()({name:"VSkeletonLoader",props:st(),setup(e,V){let{slots:r}=V;const{backgroundColorClasses:g,backgroundColorStyles:v}=Me(N(e,"color")),{dimensionStyles:w}=ze(e),{elevationClasses:S}=je(e),{themeClasses:l}=Ue(e),{t:U}=Ee(),k=F(()=>le(Oe(e.type).join(",")));return ue(()=>{var D;const p=!r.default||e.loading;return i("div",{class:["v-skeleton-loader",{"v-skeleton-loader--boilerplate":e.boilerplate},l.value,g.value,S.value],style:[v.value,p?w.value:{}],"aria-busy":e.boilerplate?void 0:p,"aria-live":e.boilerplate?void 0:"polite","aria-label":e.boilerplate?void 0:U(e.loadingText),role:e.boilerplate?void 0:"alert"},[p?k.value:(D=r.default)==null?void 0:D.call(r)])}),{}}});function it(){const e=_([]);Ke(()=>e.value=[]);function V(r,g){e.value[g]=r}return{refs:e,updateRef:V}}const rt=ie({activeColor:String,start:{type:[Number,String],default:1},modelValue:{type:Number,default:e=>e.start},disabled:Boolean,length:{type:[Number,String],default:1,validator:e=>e%1===0},totalVisible:[Number,String],firstIcon:{type:X,default:"$first"},prevIcon:{type:X,default:"$prev"},nextIcon:{type:X,default:"$next"},lastIcon:{type:X,default:"$last"},ariaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.root"},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},firstAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.first"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},lastAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.last"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,...He(),...$e(),...Ge(),...Se(),...Ze(),...Qe(),...Ie({tag:"nav"}),...Le(),...We({variant:"text"})},"VPagination"),ut=re()({name:"VPagination",props:rt(),emits:{"update:modelValue":e=>!0,first:e=>!0,prev:e=>!0,next:e=>!0,last:e=>!0},setup(e,V){let{slots:r,emit:g}=V;const v=Xe(e,"modelValue"),{t:w,n:S}=Ee(),{isRtl:l}=xe(),{themeClasses:U}=Ue(e),{width:k}=Ye(),p=Je(-1);fe(void 0,{scoped:!0});const{resizeRef:D}=ea(a=>{if(!a.length)return;const{target:d,contentRect:f}=a[0],n=d.querySelector(".v-pagination__list > *");if(!n)return;const t=f.width,u=n.offsetWidth+parseFloat(getComputedStyle(n).marginRight)*2;p.value=O(t,u)}),$=F(()=>parseInt(e.length,10)),I=F(()=>parseInt(e.start,10)),L=F(()=>e.totalVisible?parseInt(e.totalVisible,10):p.value>=0?p.value:O(k.value,58));function O(a,d){const f=e.showFirstLastPage?5:3;return Math.max(0,Math.floor(+((a-d*f)/d).toFixed(2)))}const G=F(()=>{if($.value<=0||isNaN($.value)||$.value>Number.MAX_SAFE_INTEGER)return[];if(L.value<=1)return[v.value];if($.value<=L.value)return Y($.value,I.value);const a=L.value%2===0,d=a?L.value/2:Math.floor(L.value/2),f=a?d:d+1,n=$.value-d;if(f-v.value>=0)return[...Y(Math.max(1,L.value-1),I.value),e.ellipsis,$.value];if(v.value-n>=(a?1:0)){const t=L.value-1,u=$.value-t+I.value;return[I.value,e.ellipsis,...Y(t,u)]}else{const t=Math.max(1,L.value-3),u=t===1?v.value:v.value-Math.ceil(t/2)+I.value;return[I.value,e.ellipsis,...Y(t,u),e.ellipsis,$.value]}});function T(a,d,f){a.preventDefault(),v.value=d,f&&g(f,d)}const{refs:M,updateRef:K}=it();fe({VPaginationBtn:{color:N(e,"color"),border:N(e,"border"),density:N(e,"density"),size:N(e,"size"),variant:N(e,"variant"),rounded:N(e,"rounded"),elevation:N(e,"elevation")}});const q=F(()=>G.value.map((a,d)=>{const f=n=>K(n,d);if(typeof a=="string")return{isActive:!1,key:`ellipsis-${d}`,page:a,props:{ref:f,ellipsis:!0,icon:!0,disabled:!0}};{const n=a===v.value;return{isActive:n,key:a,page:S(a),props:{ref:f,ellipsis:!1,icon:!0,disabled:!!e.disabled||+e.length<2,color:n?e.activeColor:e.color,ariaCurrent:n,ariaLabel:w(n?e.currentPageAriaLabel:e.pageAriaLabel,a),onClick:t=>T(t,a)}}}})),E=F(()=>{const a=!!e.disabled||v.value<=I.value,d=!!e.disabled||v.value>=I.value+$.value-1;return{first:e.showFirstLastPage?{icon:l.value?e.lastIcon:e.firstIcon,onClick:f=>T(f,I.value,"first"),disabled:a,ariaLabel:w(e.firstAriaLabel),ariaDisabled:a}:void 0,prev:{icon:l.value?e.nextIcon:e.prevIcon,onClick:f=>T(f,v.value-1,"prev"),disabled:a,ariaLabel:w(e.previousAriaLabel),ariaDisabled:a},next:{icon:l.value?e.prevIcon:e.nextIcon,onClick:f=>T(f,v.value+1,"next"),disabled:d,ariaLabel:w(e.nextAriaLabel),ariaDisabled:d},last:e.showFirstLastPage?{icon:l.value?e.firstIcon:e.lastIcon,onClick:f=>T(f,I.value+$.value-1,"last"),disabled:d,ariaLabel:w(e.lastAriaLabel),ariaDisabled:d}:void 0}});function H(){var d;const a=v.value-I.value;(d=M.value[a])==null||d.$el.focus()}function s(a){a.key===ge.left&&!e.disabled&&v.value>+e.start?(v.value=v.value-1,pe(H)):a.key===ge.right&&!e.disabled&&v.value<I.value+$.value-1&&(v.value=v.value+1,pe(H))}return ue(()=>i(e.tag,{ref:D,class:["v-pagination",U.value,e.class],style:e.style,role:"navigation","aria-label":w(e.ariaLabel),onKeydown:s,"data-test":"v-pagination-root"},{default:()=>[i("ul",{class:"v-pagination__list"},[e.showFirstLastPage&&i("li",{key:"first",class:"v-pagination__first","data-test":"v-pagination-first"},[r.first?r.first(E.value.first):i(A,z({_as:"VPaginationBtn"},E.value.first),null)]),i("li",{key:"prev",class:"v-pagination__prev","data-test":"v-pagination-prev"},[r.prev?r.prev(E.value.prev):i(A,z({_as:"VPaginationBtn"},E.value.prev),null)]),q.value.map((a,d)=>i("li",{key:a.key,class:["v-pagination__item",{"v-pagination__item--is-active":a.isActive}],"data-test":"v-pagination-item"},[r.item?r.item(a):i(A,z({_as:"VPaginationBtn"},a.props),{default:()=>[a.page]})])),i("li",{key:"next",class:"v-pagination__next","data-test":"v-pagination-next"},[r.next?r.next(E.value.next):i(A,z({_as:"VPaginationBtn"},E.value.next),null)]),e.showFirstLastPage&&i("li",{key:"last",class:"v-pagination__last","data-test":"v-pagination-last"},[r.last?r.last(E.value.last):i(A,z({_as:"VPaginationBtn"},E.value.last),null)])])]})),{}}}),dt={key:0,class:"mb-4 text-error text-center"},ct={key:1,class:"mb-4 text-error text-center"},vt={key:3,class:"grid grid-cols-3 gap-4"},mt={key:0,class:"text-error px-6 py-4 whitespace-nowrap text-center"},ft=["src"],gt={key:0,class:"images-display mt-2"},pt=["src"],bt={class:"flex items-center gap-2"},yt={class:"grid gap-2"},Vt={key:0,class:"flex flex-sm-column"},ht={key:0},_t={key:0,class:"flex gap-2 mb-4"},kt={key:1},wt=["src"],$t={key:2},It=["src"],xt={key:3},Ct=["src"],St={key:4,class:"grid grid-cols-1"},Lt={class:"mb-2"},Ut={class:"grid grid-cols-2 gap-3"},Et=["src"],Pt={key:0,class:"flex flex-sm-column"},Dt={key:0,class:"mr-2"},Bt={key:1},At=["innerHTML"],Ft="https://api.alifawzi.software/",Tt={__name:"cards",props:{endPoint:{type:String,default:"",required:!0},EditMessage:{type:String,default:"",required:!1},imageEndpoint:{type:String,default:"",required:!1},state:{type:Object,required:!0},searchValue:{type:String,default:"",required:!1},headers:{type:Array,default:[],required:!1},rowName:{type:String,default:"row",required:!1},refreshData:{type:Boolean,default:!1,required:!1},delete:{type:Boolean,default:!1,required:!1},edit:{type:Boolean,default:!1,required:!1},pagination:{type:Boolean,default:!0,required:!1},filters:{type:Object,default:()=>({}),required:!1},useCKEditor:{type:Boolean,default:!1,required:!1},fetchRow:{type:Boolean,default:!0,required:!1},customStyleTitle:{type:Boolean,default:!0,required:!1}},setup(e){const{locale:V}=de(),r=e,g=_(!1),v=_(!0),w=_([]),S=_({}),l=_(1),U=_(0),k=_(0),p=_(6),D=tt(),$=_(!1),I=_(!1),L=async(a=1)=>{try{const d=await Pe(r.endPoint,{page:a,size:p.value});d.data?w.value=d.data:w.value=d,k.value=d.data.length,U.value=Math.ceil(k.value/p.value),T()}catch(d){console.error("Failed to fetch data:",d)}finally{v.value=!1}},O=a=>{$.value=a,a&&setTimeout(()=>{$.value=!1},3e3)},G=a=>{I.value=a,a&&setTimeout(()=>{I.value=!1},3e3)},T=()=>{S.value={},w.value.forEach(a=>{S.value[a.id]=!1})},M=F(()=>{let a=w.value;return r.searchValue&&(a=a.filter(d=>Object.values(d).some(f=>String(f).toLowerCase().includes(r.searchValue.toLowerCase())))),Object.keys(r.filters).forEach(d=>{r.filters[d]&&(a=a.filter(f=>String(f[d]).toLowerCase().includes(r.filters[d].toLowerCase())))}),a}),K=F(()=>{if(!M.value||M.value.length===0)return[];const a=(l.value-1)*p.value,d=a+p.value;return M.value.slice(a,d)});se(()=>r.refreshData,()=>{L(l.value)}),se(l,()=>{L(l.value)}),Ce(()=>{L(l.value)}),se(w,T);const q=_(r.headers),E=a=>{S.value[a]=!0},H=a=>{S.value[a]=!1},s=a=>`${Ft}${a}`;return(a,d)=>{const f=at,n=Ja;return o(),c(C,null,[$.value?(o(),c("p",dt,y(a.$t("edit data error")),1)):b("",!0),I.value?(o(),c("p",ct,y(a.$t("delete data error")),1)):b("",!0),g.value?(o(),x(aa,{key:2,indeterminate:""})):b("",!0),v.value?(o(),c("div",vt,[(o(),c(C,null,R(6,t=>i(B(ot),{key:t,type:"card",class:"mb-4"})),64))])):b("",!0),v.value?b("",!0):(o(),x(Za,{key:4,fluid:"",class:"w-full p-0 py-0 px-0"},{default:m(()=>[K.value.length===0&&!v.value?(o(),c("p",mt,y(a.$t("no data found please add")),1)):b("",!0),i(Ae,null,{default:m(()=>[(o(!0),c(C,null,R(K.value,t=>(o(),x(Fe,{key:t.id,cols:"12",sm:"6",md:"4"},{default:m(()=>[i(ee,{onClick:u=>E(t.id)},{default:m(()=>[i(oe,{class:"d-flex justify-space-between align-center"}),i(ae,null,{default:m(()=>[(o(!0),c(C,null,R(q.value,u=>(o(),c("div",{key:u.key,class:"mb-2"},[u.key==="url"||u.key==="image"?(o(),c("img",{key:0,src:s(t[u.key]),class:"w-[100%] h-[200px] object-cover"},null,8,ft)):b("",!0)]))),128)),(o(!0),c(C,null,R(q.value,u=>(o(),c("div",{key:u.key,class:"mb-2"},[u.key!=="urls"&&u.key!=="images"&&u.key!=="iconId"&&u.key!=="url"&&u.key!=="image"&&u.key!=="urlImage"?(o(),c(C,{key:0},[h("span",null,y(a.$t(u.title))+":",1),i(_e,{class:"ma-2",label:""},{default:m(()=>[j(y(B(D).textLength(t[u.key],20)),1)]),_:2},1024)],64)):b("",!0)]))),128)),(o(!0),c(C,null,R(q.value,u=>(o(),c("div",{key:u.key,class:"mb-2"},[u.key==="iconId"?(o(),c(C,{key:0},[h("span",null,y(a.$t("icon")),1),i(_e,{class:"ma-2",label:""},{default:m(()=>[i(J,null,{default:m(()=>[j(y(t[u.key]),1)]),_:2},1024)]),_:2},1024)],64)):b("",!0)]))),128)),t.urls?(o(),c("div",gt,[(o(!0),c(C,null,R(t.urls,(u,ne)=>(o(),c("div",{key:u,style:be({zIndex:ne+1})},[h("img",{src:s(u),alt:"images",class:"images",style:be({right:`${ne*2}px`,top:`${ne*0}px`})},null,12,pt)],4))),128))])):b("",!0),h("div",bt,[h("strong",null,y(a.$t("actions")),1),r.delete?(o(),x(f,{key:0,endPoint:r.endPoint,state:w.value,rowName:r.rowName,id:t.id,onRowDeleted:L,onDeleteError:d[0]||(d[0]=u=>G(!0)),onLoading:d[1]||(d[1]=u=>g.value=u)},null,8,["endPoint","state","rowName","id"])):b("",!0),r.edit?(o(),x(n,{key:1,useCKEditor:r.useCKEditor,id:t.id,endPoint:r.endPoint,fetchRow:r.fetchRow,imageEndpoint:r.imageEndpoint,EditMessage:r.EditMessage,state:r.state,onDataEdited:L,onDataEdit:d[2]||(d[2]=u=>O(!0)),onLoading:d[3]||(d[3]=u=>g.value=u)},null,8,["useCKEditor","id","endPoint","fetchRow","imageEndpoint","EditMessage","state"])):b("",!0)])]),_:2},1024)]),_:2},1032,["onClick"]),i(me,{modelValue:S.value[t.id],"onUpdate:modelValue":u=>S.value[t.id]=u,"max-width":"600"},{default:m(()=>[t?(o(),x(ee,{key:0,class:"pt-4 pl-4"},{default:m(()=>[i(oe,null,{default:m(()=>[j(y(a.$t("details")),1)]),_:1}),i(ae,null,{default:m(()=>[h("div",yt,[(o(!0),c(C,null,R(q.value,u=>(o(),c("div",{class:"w-[530px]",key:u.key},[t[u.key]&&u.key!=="description"&&u.key!=="iconId"&&u.key!=="image"&&u.key!=="urlImage"&&u.key!=="url"&&u.key!=="urls"?(o(),c("div",Vt,[h("span",{class:ta(B(V)==="ar"?"ml-2":"mr-2")},y(u.title)+":",3),u.key!=="description"?(o(),c("strong",ht,y(t[u.key]),1)):b("",!0)])):b("",!0)]))),128)),t.iconId?(o(),c("div",_t,[h("span",null,y(a.$t("icon")),1),i(J,null,{default:m(()=>[j(y(t.iconId),1)]),_:2},1024)])):b("",!0),t.image?(o(),c("div",kt,[h("span",null,y(a.$t("image")),1),h("img",{src:s(t.image),class:"w-[350px] h-auto object-cover mt-3"},null,8,wt)])):b("",!0),t.url?(o(),c("div",$t,[h("span",null,y(a.$t("image")),1),h("img",{src:s(t.url),class:"w-[auto] h-auto object-cover mt-3"},null,8,It)])):b("",!0),t.urlImage?(o(),c("div",xt,[h("span",null,y(a.$t("image")),1),h("img",{src:s(t.urlImage),class:"w-[350px] h-auto object-cover mt-3"},null,8,Ct)])):b("",!0),t.urls?(o(),c("div",St,[h("span",Lt,y(a.$t("images")),1),h("div",Ut,[(o(!0),c(C,null,R(t.urls,u=>(o(),c("div",{key:u},[h("img",{src:s(u),class:"h-[auto] w-auto"},null,8,Et)]))),128))])])):b("",!0),(o(!0),c(C,null,R(q.value,u=>(o(),c("div",{class:"w-[530px]",key:u.key},[t[u.key]&&u.key==="description"?(o(),c("div",Pt,[e.customStyleTitle?(o(),c("span",Dt,y(a.$t("custom style"))+":",1)):(o(),c("span",Bt,y(a.$t("description")),1)),h("div",null,[i(te),h("div",{class:"my-4",innerHTML:t[u.key]},null,8,At)])])):b("",!0)]))),128))])]),_:2},1024),i(te),i(ce,{class:"footer"},{default:m(()=>[i(ve),i(A,{text:a.$t("Close"),variant:"plain",onClick:u=>H(t.id)},null,8,["text","onClick"])]),_:2},1024)]),_:2},1024)):b("",!0)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024))),128))]),_:1}),r.pagination?(o(),x(ut,{key:1,class:"mt-5",modelValue:l.value,"onUpdate:modelValue":[d[4]||(d[4]=t=>l.value=t),L],"total-visible":5,length:U.value,"active-color":"primary"},null,8,["modelValue","length"])):b("",!0)]),_:1}))],64)}}},Xt=Ha(Tt,[["__scopeId","data-v-dd18b384"]]);export{ot as V,Xt as _,ut as a,at as b,Ja as c,tt as u};
