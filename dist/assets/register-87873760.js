import{_ as h,j as k,r as m,o as f,f as v,e as t,b as a,d as p,t as i,m as e,ai as I,aj as L,s as M,c as B,x as C}from"./index-10957db2.js";import{u as V,a as A,b as z}from"./misc-mask-light-851dda13.js";import{V as D,a as N,b as P,c as S,d as j}from"./VForm-acce26e7.js";import{a as F}from"./axios-1779699b.js";import"./apiService-d37951fb.js";import{V as T}from"./VCard-79ff78eb.js";import{V as g}from"./VCardText-fba38b63.js";import{V as U}from"./VImg-79c306aa.js";import{V as _,a as u}from"./VRow-fbf0bec9.js";import{V as c}from"./VTextField-9d9b781b.js";import"./forwardRefs-6ea3df5c.js";import"./VAvatar-aba8af5a.js";const Z={class:"mb-0"},$={key:0,class:"text-error mt-2"},ae={__name:"register",setup(E){const{t:s}=h(),b=k();m("");const l=m({name:"",email:"",password:""}),w=async()=>{try{const o=await F.post("https://api.alifawzi.software/api/Autors/signIn",l.value);localStorage.setItem("auth_token",o.data.token),location.reload()}catch(o){console.error("Failed to register:",o),l.value.errorMessage=s(o.response.data.message)||s("An error occurred.")}},x=o=>o.length>=8||s("Password must be at least 8 characters long"),y=o=>/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/.test(o)||s("Invalid email address"),d=m(!1);return V(j,S,P,N,!0),V(z,A),(o,r)=>(f(),v(_,{"no-gutters":"",class:"auth-wrapper bg-surface"},{default:t(()=>[a(u,{cols:"12",md:"12",class:"auth-card-v2 d-flex align-center justify-center"},{default:t(()=>[a(T,{flat:"","max-width":500,class:"mt-12 mt-sm-0 pa-4"},{default:t(()=>[a(g,null,{default:t(()=>[a(U,{src:"/MainLogo.png",class:"mb-4 w-16 h-auto"}),p("p",Z,i(e(s)("Please sign-up to a new account")),1)]),_:1}),a(g,null,{default:t(()=>[a(D,{onSubmit:I(w,["prevent"])},{default:t(()=>[a(_,null,{default:t(()=>[a(u,{cols:"12"},{default:t(()=>[a(c,{modelValue:e(l).name,"onUpdate:modelValue":r[0]||(r[0]=n=>e(l).name=n),autofocus:"",label:e(s)("name"),type:"text",clearable:""},null,8,["modelValue","label"])]),_:1}),a(u,{cols:"12"},{default:t(()=>[a(c,{rules:[y],modelValue:e(l).email,"onUpdate:modelValue":r[1]||(r[1]=n=>e(l).email=n),autofocus:"",label:e(s)("Email"),type:"email",clearable:""},null,8,["rules","modelValue","label"])]),_:1}),a(u,{cols:"12"},{default:t(()=>[a(c,{modelValue:e(l).password,"onUpdate:modelValue":r[2]||(r[2]=n=>e(l).password=n),label:e(s)("Password"),rules:[x],type:e(d)?"text":"password","append-inner-icon":e(d)?"tabler-eye-off":"tabler-eye","onClick:appendInner":r[3]||(r[3]=n=>d.value=!e(d)),clearable:""},null,8,["modelValue","label","rules","type","append-inner-icon"])]),_:1}),a(u,{cols:"12"},{default:t(()=>[a(L,{block:"",type:"submit",class:"mt-2"},{default:t(()=>[M(i(e(s)("Sign up")),1)]),_:1}),e(l).errorMessage?(f(),B("p",$,i(e(l).errorMessage),1)):C("",!0)]),_:1}),a(u,{cols:"12",class:"text-center text-base"},{default:t(()=>[p("span",null,i(e(s)("Already have account ?")),1),p("button",{class:"text-primary ms-2",onClick:r[4]||(r[4]=n=>e(b).push("/login"))},i(e(s)("sign in")),1)]),_:1}),a(u,{cols:"12",class:"d-flex align-center"})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}};export{ae as default};
